<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>snapper</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.0"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry"><a name="snapper8"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>snapper &#8212; Command-line program for filesystem snapshot management</p></div><div class="refsynopsisdiv"><a name="synopsis"></a><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">snapper</code>  [<em class="replaceable"><code>--global-opts</code></em>]  <em class="replaceable"><code>command</code></em>  [<em class="replaceable"><code>--command-opts</code></em>] [<em class="replaceable"><code>command-arguments</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">snapper</code>  {--help}</p></div></div><div class="refsect1"><a name="description"></a><h2>DESCRIPTION</h2><p>Snapper is a command-line program for filesystem snapshot management. It can
    create, delete and compare snapshots and undo changes done between snapshots.</p><p>Snapper never modifies the content of snapshots. Thus snapper creates
    read-only snapshots if supported by the kernel. Supported filesystems are
    btrfs and ext4 as well as snapshots of LVM logical volumes with
    thin-provisioning. Some filesystems might not be supported depending on your
    installation.</p></div><div class="refsect1"><a name="concepts"></a><h2>CONCEPTS</h2><div class="refsect2"><a name="configurations"></a><h3>Configurations</h3><p>For each filesystem or subvolume that should be snapshotted by snapper a
      configuration file is required. The complete setup can be done with the
      create-config command.</p></div><div class="refsect2"><a name="snapshots"></a><h3>Snapshots</h3><p>Snapper distinguishes three types of snapshots.</p><p><span class="emphasis"><em>pre</em></span> - Pre snapshots should always have a corresponding post
      snapshot. The intention of pre/post shotshot pairs is to snapshot the
      filesystem before and after a modification.</p><p><span class="emphasis"><em>post</em></span> - See pre type.</p><p><span class="emphasis"><em>single</em></span> - These snapshots have no special relationship to other
      snapshots.</p><p>Note that filesystem-wise all three types are the same.</p></div><div class="refsect2"><a name="snapshot_description_und_userdata"></a><h3>Snapshot Description und Userdata</h3><p>With each snapshot a description and some userdata can be associated. The
      description is a string. The userdata is a list of key-value pairs where the
      keys and values are strings.</p></div><div class="refsect2"><a name="automatic_snapshot_creation"></a><h3>Automatic Snapshot Creation</h3><p>Next to manual snapshot creation snapshots are also created automatically.</p><p><span class="emphasis"><em>cron-job</em></span> - A cron-job creates hourly snapshots.</p><p><span class="emphasis"><em>certain programs</em></span> - Certain programs like YaST and zypper create pre/post
      snapshot pairs when modifying the system.</p></div><div class="refsect2"><a name="cleanup_algorithms"></a><h3>Cleanup Algorithms</h3><p>Snapper provides several algorithms to cleanup old snapshots. The
      algorithms are executed in a daily cron-job. This can be configured in the
      corresponding configurations files along with parameters for every
      algorithm.</p><p><span class="emphasis"><em>number</em></span> - Deletes old snapshots when a
      certain number of snapshots is reached.</p><p><span class="emphasis"><em>timeline</em></span> - Deletes old snapshots but
      keeps a number of hourly, daily, monthly and yearly snapshots.</p><p><span class="emphasis"><em>empty-pre-post</em></span> - Deletes pre/post snapshot pairs with empty diffs.</p></div></div><div class="refsect1"><a name="global_options"></a><h2>GLOBAL OPTIONS</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-q, --quiet</code></span></dt><dd><p>Suppress normal output. Error messages will still be printed, though.</p></dd><dt><span class="term"><code class="option">-v, --verbose</code></span></dt><dd><p>Increase verbosity.</p></dd><dt><span class="term"><code class="option">-t, --table-style</code></span></dt><dd><p>Specifies table style. Table style is identified by an integer number.</p></dd><dt><span class="term"><code class="option">-c, --config &lt;name&gt;</code></span></dt><dd><p>Use specified configuration instead of the default configuration. The default
	  configuration is named "root".</p></dd><dt><span class="term"><code class="option">--version</code></span></dt><dd><p>Print version and exit.</p></dd></dl></div></div><div class="refsect1"><a name="commands"></a><h2>COMMANDS</h2><p>snapper provides a number of <span class="emphasis"><em>commands</em></span>. Each command accepts the options
    listed in the GLOBAL OPTIONS section. These options must be specified
    <span class="emphasis"><em>before</em></span> the command name. In addition, many commands have specific
    options, which are listed in this section. These command-specific options must
    be specified <span class="emphasis"><em>after</em></span> the name of the command and <span class="emphasis"><em>before</em></span> any of the
    command arguments.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>help</em></span></span></dt><dd><p>Show short help text.</p></dd><dt><span class="term"><span class="emphasis"><em>list-configs</em></span></span></dt><dd><p>List available configurations.</p></dd><dt><span class="term"><span class="emphasis"><em>create-config [options] &lt;subvolume&gt;</em></span></span></dt><dd><p>Create a new configuration for a filesystem or subvolume. For this command you
	  will likely need the global option <code class="option">--config</code>, see <span class="emphasis"><em>GLOBAL OPTIONS</em></span> and
	  <a class="link" href="#concepts" title="CONCEPTS">CONCEPTS.</a></p></dd><dt><span class="term"><code class="option">-f, --fstype</code> &lt;fstype&gt;</span></dt><dd><p>Manually set filesystem type. Supported values are btrfs, ext4 and lvm. For
	  lvm snapper uses LVM thin-provisioned snapshots. The filesystem type on top of
	  LVM must be provided in parentheses, e.g. lvm(xfs).</p><p>Without this option snapper tries to detect the filesystem.</p></dd><dt><span class="term"><code class="option">-t, --template</code> &lt;name&gt;</span></dt><dd><p>Name of template for the new configuration file.</p></dd><dt><span class="term"><span class="emphasis"><em>delete-config</em></span></span></dt><dd><p>Delete a configuration for a filesystem or subvolume. For this command you
	  will likely need to global option <code class="option">--config</code>, see <span class="emphasis"><em>GLOBAL OPTIONS</em></span> and
	  <a class="link" href="#concepts" title="CONCEPTS">CONCEPTS.</a></p></dd><dt><span class="term"><span class="emphasis"><em>list [options]</em></span></span></dt><dd><p>List snapshots.</p></dd><dt><span class="term"><code class="option">-t, --type</code> &lt;type&gt;</span></dt><dd><p>Selects type of snapshots to list. Possible values are all, single and pre-post.</p></dd><dt><span class="term"><span class="emphasis"><em>create [options]</em></span></span></dt><dd><p>Create a new snapshot.</p></dd><dt><span class="term"><code class="option">-t, --type</code> &lt;type&gt;</span></dt><dd><p>Specifies the type of the new snapshot. Possible values are single, pre and post.</p></dd><dt><span class="term"><code class="option">--pre-number</code> &lt;number&gt;</span></dt><dd><p>For post snapshots the number of the pre snapshot must be provided.</p></dd><dt><span class="term"><code class="option">-p, --print-number</code></span></dt><dd><p>Print number of the created snapshot.</p></dd><dt><span class="term"><code class="option">-d, --description</code> &lt;description&gt;</span></dt><dd><p>Description for the snapshot.</p></dd><dt><span class="term"><code class="option">-c, --cleanup-algorithm</code> &lt;cleanup-algorithm&gt;</span></dt><dd><p>Set the cleanup-algorithm for the snapshot.</p></dd><dt><span class="term"><code class="option">-u, --userdata</code> &lt;userdata&gt;</span></dt><dd><p>Set userdata for the snapshot. The key-value pairs must be seperated by comma
	  and the key and value must be seperated by an equal sign,
	  e.g. requestid=42,user=arthur.</p></dd><dt><span class="term"><code class="option">--command</code> &lt;command&gt;</span></dt><dd><p>Create a pre and post snapshot and run command in between.</p></dd><dt><span class="term"><span class="emphasis"><em>modify [options] &lt;number&gt;</em></span></span></dt><dd><p>Modify a snapshot.</p></dd><dt><span class="term"><code class="option">-d, --description</code> &lt;description&gt;</span></dt><dd><p>New description for snapshot.</p></dd><dt><span class="term"><code class="option">-c, --cleanup-algorithm</code> &lt;cleanup-algorithm&gt;</span></dt><dd><p>Set the cleanup-algorithm for the snapshot.</p></dd><dt><span class="term"><code class="option">-u, --userdata</code> &lt;userdata&gt;</span></dt><dd><p>Set userdata for the snapshot. The key-value pairs must be seperated by comma
	  and the key and value must be seperated by an equal sign,
	  e.g. requestid=42,user=arthur.</p></dd><dt><span class="term"><span class="emphasis"><em>delete &lt;number&gt; | &lt;number1&gt;-&lt;number2&gt;</em></span></span></dt><dd><p>Delete a snapshot or a range of snapshots.</p></dd><dt><span class="term"><span class="emphasis"><em>mount &lt;number&gt;</em></span></span></dt><dd><p>Mount a snapshot. Not required for all filesystem types.</p></dd><dt><span class="term"><span class="emphasis"><em>umount &lt;number&gt;</em></span></span></dt><dd><p>Unmount a snapshot. Not required for all filesystem types.</p></dd><dt><span class="term"><span class="emphasis"><em>status [options] &lt;number1&gt;..&lt;number2&gt;</em></span></span></dt><dd><p>Compare the snapshots number1 and number2. This will show a list of files and
	  directories that have been created, modified or deleted in the time between
	  the two snapshots have been made.</p></dd><dt><span class="term"><code class="option">-o, --output</code> &lt;file&gt;</span></dt><dd><p>Write output to file &lt;file&gt;.</p></dd><dt><span class="term"><span class="emphasis"><em>diff [options] &lt;number1&gt;..&lt;number2&gt; [files]</em></span></span></dt><dd><p>Compare the snapshots number1 and number2. This will show a diff of the
	  content of files and directories that have been created, modified or deleted
	  in the time between the two snapshots have been made.</p></dd><dt><span class="term"><span class="emphasis"><em>undochange [options] &lt;number1&gt;..&lt;number2&gt; [files]</em></span></span></dt><dd><p>Undo changes done between snapshot number1 and number2.</p></dd><dt><span class="term"><code class="option">-i, --input</code> &lt;file&gt;</span></dt><dd><p>Read files for which to undo changes from file &lt;file&gt;.</p></dd><dt><span class="term"><span class="emphasis"><em>cleanup &lt;cleanup-algorithm&gt;</em></span></span></dt><dd><p>Run the cleanup algorithm &lt;cleanup-algorithm&gt;. Currently implemented cleanup
	  algorithms are number, timeline and empty-pre-post.</p></dd><dt><span class="term"><span class="emphasis"><em>xadiff &lt;number1&gt;..&lt;number2&gt; [files]</em></span></span></dt><dd><p>Compare the extended attributes. This command will genereate a report
	  describing the modifications that have taken place in time between the
	  snapshots number1 and number2 have been made. See example below:</p><p><span class="emphasis"><em> +:user.foo</em></span>
	  for created attributes</p><p><span class="emphasis"><em> -:user.bar</em></span>
	  for removed attributes</p><p><code class="option">-+:security.selinux</code>
	  for modified attributes</p></dd></dl></div></div><div class="refsect1"><a name="permissions"></a><h2>PERMISSIONS</h2><p>Non-root users can be allowed to use a configuration by setting ALLOW_USERS or
    ALLOW_GROUPS in the config file. For all operations to work the user must also
    be able to read and access the .snapshots directory inside the
    subvolume. The .snapshots directory must be owned by root and must not be
    writable by anybody else.</p></div><div class="refsect1"><a name="files"></a><h2>FILES</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="filename">/etc/sysconfig/snapper</code></span></dt><dd><p>Global configuration file.</p></dd><dt><span class="term"><code class="filename">/etc/snapper/configs</code></span></dt><dd><p>Directory containing configuration files.</p></dd><dt><span class="term"><code class="filename">/etc/snapper/config-templates</code></span></dt><dd><p>Directory containing configuration templates.</p></dd><dt><span class="term"><code class="filename">/etc/snapper/filters</code></span></dt><dd><p>Directory containing filter files.</p></dd><dt><span class="term"><code class="filename">/var/log/snapper.log</code></span></dt><dd><p>Logfile. Please include this file in bug reports.</p></dd></dl></div></div><div class="refsect1"><a name="notes"></a><h2>NOTES</h2><p>There is no mechanism to ensure consistency of the files while a snapshot it
    made. E.g. the files of a database can be inconsistence while the database is
    running.</p><p>Consistency after undochange is not guaranteed. E.g. when the creation of a
    user is undone there might still exist files from that user.</p><p>Support for extended attributes is a compile-time option.</p></div><div class="refsect1"><a name="homepage"></a><h2>HOMEPAGE</h2><p><a class="ulink" href="http://en.opensuse.org/Portal:Snapper" target="_top">http://en.opensuse.org/Portal:Snapper</a></p></div><div class="refsect1"><a name="authors"></a><h2>AUTHORS</h2><p>Arvin Schnell <code class="email">&lt;<a class="email" href="mailto:aschnell@suse.de">aschnell@suse.de</a>&gt;</code></p></div><div class="refsect1"><a name="see_also"></a><h2>SEE ALSO</h2><p>
      <span class="citerefentry"><span class="refentrytitle">btrfs</span>(8)</span>,
      <span class="citerefentry"><span class="refentrytitle">lvm</span>(8)</span>,
      <span class="citerefentry"><span class="refentrytitle">attr</span>(5)</span>
    </p></div></div></body></html>
