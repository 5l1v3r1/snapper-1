<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>snapper</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.0"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry"><a name="snapper8"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>snapper &#8212; Command-line program for filesystem snapshot management</p></div><div class="refsynopsisdiv"><a name="synopsis"></a><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">snapper</code>  [<em class="replaceable"><code>--global-opts</code></em>]  <em class="replaceable"><code>command</code></em>  [<em class="replaceable"><code>--command-opts</code></em>] [<em class="replaceable"><code>command-arguments</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">snapper</code>  {--help}</p></div></div><div class="refsect1"><a name="description"></a><h2>DESCRIPTION</h2><p>Snapper is a command-line program for filesystem snapshot management. It can
    create, delete and compare snapshots and undo changes done between snapshots.</p><p>Snapper never modifies the content of snapshots. Thus snapper creates
    read-only snapshots if supported by the kernel. Supported filesystems are
    btrfs and ext4 as well as snapshots of LVM logical volumes with
    thin-provisioning. Some filesystems might not be supported depending on your
    installation.</p></div><div class="refsect1"><a name="concepts"></a><h2>CONCEPTS</h2><div class="refsect2"><a name="configurations"></a><h3>Configurations</h3><p>For each filesystem or subvolume that should be snapshotted by snapper a
      configuration file is required. The complete setup can be done with the
      create-config command.</p></div><div class="refsect2"><a name="snapshots"></a><h3>Snapshots</h3><p>Snapper distinguishes three types of snapshots.</p><div class="glosslist"><dl><dt>pre</dt><dd><p>Pre snapshots should always have a corresponding post
	    snapshot. The intention of pre/post snapshot pairs is to snapshot the
	    filesystem before and after a modification.</p></dd><dt>post</dt><dd><p>See pre type.</p></dd><dt>single</dt><dd><p>These snapshots have no special relationship to other snapshots.</p></dd></dl></div><p>Note that filesystem-wise all three types are the same.</p></div><div class="refsect2"><a name="snapshot_description_and_userdata"></a><h3>Snapshot Description and Userdata</h3><p>With each snapshot a description and some userdata can be associated. The
      description is a string. The userdata is a list of key-value pairs where the
      keys and values are strings.</p></div><div class="refsect2"><a name="automatic_snapshot_creation"></a><h3>Automatic Snapshot Creation</h3><p>Next to manual snapshot creation snapshots are also created automatically.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A cron-job creates hourly snapshots.</p></li><li class="listitem"><p>Certain programs like YaST and zypper create pre/post
	  snapshot pairs when modifying the system.</p></li></ul></div></div><div class="refsect2"><a name="cleanup_algorithms"></a><h3>Cleanup Algorithms</h3><p>Snapper provides several algorithms to cleanup old snapshots. The
      algorithms are executed in a daily cron-job. This can be configured in the
      corresponding configurations files along with parameters for every
      algorithm.</p><div class="glosslist"><dl><dt>number</dt><dd><p>Deletes old snapshots when a certain number of snapshots is reached.</p></dd><dt>timeline</dt><dd><p>Deletes old snapshots but keeps a number of hourly, daily,
	    monthly and yearly snapshots.</p></dd><dt>empty-pre-post</dt><dd><p>Deletes pre/post snapshot pairs with empty diffs.</p></dd></dl></div></div></div><div class="refsect1"><a name="global_options"></a><h2>GLOBAL OPTIONS</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-q, --quiet</code></span></dt><dd><p>Suppress normal output. Error messages will still be printed, though.</p></dd><dt><span class="term"><code class="option">-v, --verbose</code></span></dt><dd><p>Increase verbosity.</p></dd><dt><span class="term"><code class="option">-t, --table-style</code></span></dt><dd><p>Specifies table style. Table style is identified by an integer number.</p></dd><dt><span class="term"><code class="option">-c, --config <em class="replaceable"><code>name</code></em></code></span></dt><dd><p>Use specified configuration instead of the default configuration. The default
	  configuration is named "root".</p></dd><dt><span class="term"><code class="option">--version</code></span></dt><dd><p>Print version and exit.</p></dd></dl></div></div><div class="refsect1"><a name="commands"></a><h2>COMMANDS</h2><p>snapper provides a number of <span class="emphasis"><em>commands</em></span>. Each
    command accepts the options listed in the <a class="link" href="#global_options" title="GLOBAL OPTIONS">GLOBAL OPTIONS</a> section. These options must
    be specified <span class="emphasis"><em>before</em></span> the command name. In addition,
    many commands have specific options, which are listed in this
    section. These command-specific options must be specified
    <span class="emphasis"><em>after</em></span> the name of the command and
    <span class="emphasis"><em>before</em></span> any of the command arguments.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">help</code></span></dt><dd><p>Show short help text.</p></dd><dt><span class="term"><code class="option">list-configs</code></span></dt><dd><p>List available configurations.</p></dd><dt><span class="term"><code class="option">create-config [options] <em class="replaceable"><code>subvolume</code></em></code></span></dt><dd><p>Create a new configuration for a filesystem or subvolume. For this command you
	  will likely need the global option <code class="option">--config</code>, see
	  <a class="link" href="#global_options" title="GLOBAL OPTIONS">GLOBAL OPTIONS</a> and
	  <a class="link" href="#concepts" title="CONCEPTS">CONCEPTS.</a></p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-f, --fstype</code> <em class="replaceable"><code>fstype</code></em></span></dt><dd><p>Manually set filesystem type. Supported values are btrfs, ext4 and lvm. For
		lvm snapper uses LVM thin-provisioned snapshots. The filesystem type on top of
		LVM must be provided in parentheses, e.g. lvm(xfs).</p><p>Without this option snapper tries to detect the filesystem.</p></dd><dt><span class="term"><code class="option">-t, --template</code> <em class="replaceable"><code>name</code></em></span></dt><dd><p>Name of template for the new configuration file.</p></dd></dl></div></dd><dt><span class="term"><code class="option">delete-config</code></span></dt><dd><p>Delete a configuration for a filesystem or subvolume. For this
	  command you will likely need to global option
	  <code class="option">--config</code>, see <a class="link" href="#global_options" title="GLOBAL OPTIONS">GLOBAL
	  OPTIONS</a> and <a class="link" href="#concepts" title="CONCEPTS">CONCEPTS.</a></p></dd><dt><span class="term"><code class="option">list [options]</code></span></dt><dd><p>List snapshots.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-t, --type</code> <em class="replaceable"><code>type</code></em></span></dt><dd><p>Selects type of snapshots to list. Possible values are
		all, single and pre-post.</p></dd></dl></div></dd><dt><span class="term"><code class="option">create [options]</code></span></dt><dd><p>Create a new snapshot.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-t, --type</code> <em class="replaceable"><code>type</code></em></span></dt><dd><p>Specifies the type of the new snapshot. Possible values
		are single, pre and post.</p></dd><dt><span class="term"><code class="option">--pre-number</code> <em class="replaceable"><code>number</code></em></span></dt><dd><p>For post snapshots the number of the pre snapshot must
		be provided.</p></dd><dt><span class="term"><code class="option">-p, --print-number</code></span></dt><dd><p>Print number of the created snapshot.</p></dd><dt><span class="term"><code class="option">-d, --description</code> <em class="replaceable"><code>description</code></em></span></dt><dd><p>Description for the snapshot.</p></dd><dt><span class="term"><code class="option">-c, --cleanup-algorithm</code> <em class="replaceable"><code>cleanup-algorithm</code></em></span></dt><dd><p>Set the cleanup-algorithm for the snapshot.</p></dd><dt><span class="term"><code class="option">-u, --userdata</code> <em class="replaceable"><code>userdata</code></em></span></dt><dd><p>Set userdata for the snapshot. The key-value pairs must
		be separated by comma and the key and value must be separated
		by an equal sign, e.g. requestid=42,user=arthur.</p></dd><dt><span class="term"><code class="option">--command</code> <em class="replaceable"><code>command</code></em></span></dt><dd><p>Create a pre and post snapshot and run command in between.</p></dd></dl></div></dd><dt><span class="term"><code class="option">modify [options] <em class="replaceable"><code>number</code></em></code></span></dt><dd><p>Modify a snapshot.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-d, --description</code> <em class="replaceable"><code>description</code></em></span></dt><dd><p>New description for snapshot.</p></dd><dt><span class="term"><code class="option">-c, --cleanup-algorithm</code> <em class="replaceable"><code>cleanup-algorithm</code></em></span></dt><dd><p>Set the cleanup-algorithm for the snapshot.</p></dd><dt><span class="term"><code class="option">-u, --userdata</code> <em class="replaceable"><code>userdata</code></em></span></dt><dd><p>Set userdata for the snapshot. The key-value pairs must
		be separated by comma and the key and value must be separated
		by an equal sign, e.g. requestid=42,user=arthur.</p></dd></dl></div></dd><dt><span class="term"><code class="option">delete <em class="replaceable"><code>number</code></em> | <em class="replaceable"><code>number1-number2</code></em></code></span></dt><dd><p>Delete a snapshot or a range of snapshots.</p></dd><dt><span class="term"><code class="option">mount <em class="replaceable"><code>number</code></em></code></span></dt><dd><p>Mount a snapshot. Not required for all filesystem types.</p></dd><dt><span class="term"><code class="option">umount <em class="replaceable"><code>number</code></em></code></span></dt><dd><p>Unmount a snapshot. Not required for all filesystem types.</p></dd><dt><span class="term"><code class="option">status [options] <em class="replaceable"><code>number1</code></em>..<em class="replaceable"><code>number2</code></em></code></span></dt><dd><p>Compare the snapshots <em class="replaceable"><code>number1</code></em> and
	  <em class="replaceable"><code>number2</code></em>. This will show a list of files
	  and directories that have been created, modified or deleted in the
	  time between the two snapshots have been made.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-o, --output</code> <em class="replaceable"><code>file</code></em></span></dt><dd><p>Write output to file <em class="replaceable"><code>file</code></em>.</p></dd></dl></div></dd><dt><span class="term"><code class="option">diff [options] <em class="replaceable"><code>number1</code></em>..<em class="replaceable"><code>number2</code></em> [files]</code></span></dt><dd><p>Compare the snapshots <em class="replaceable"><code>number1</code></em> and
	  <em class="replaceable"><code>number2</code></em>. This will show a diff of the
	  content of files and directories that have been created, modified or
	  deleted in the time between the two snapshots have been made.</p></dd><dt><span class="term"><code class="option">undochange [options] <em class="replaceable"><code>number1</code></em>..<em class="replaceable"><code>number2</code></em> [files]</code></span></dt><dd><p>Undo changes done between snapshot <em class="replaceable"><code>number1</code></em> and <em class="replaceable"><code>number2</code></em>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-i, --input</code> <em class="replaceable"><code>file</code></em></span></dt><dd><p>Read files for which to undo changes from file <em class="replaceable"><code>file</code></em>.</p></dd></dl></div></dd><dt><span class="term"><code class="option">cleanup <em class="replaceable"><code>cleanup-algorithm</code></em></code></span></dt><dd><p>Run the cleanup algorithm
	  <em class="replaceable"><code>cleanup-algorithm</code></em>. Currently implemented
	  cleanup algorithms are number, timeline and empty-pre-post.</p></dd><dt><span class="term"><code class="option">xadiff <em class="replaceable"><code>number1</code></em>..<em class="replaceable"><code>number2</code></em> [files]</code></span></dt><dd><p>Compare the extended attributes between snapshot
	  <em class="replaceable"><code>number1</code></em> and
	  <em class="replaceable"><code>number2</code></em>. See examples below:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="computeroutput"> +:user.foo</code> for created attributes</p></li><li class="listitem"><p><code class="computeroutput"> -:user.bar</code> for removed attributes</p></li><li class="listitem"><p><code class="computeroutput">-+:security.selinux</code> for modified attributes</p></li></ul></div></dd></dl></div></div><div class="refsect1"><a name="permissions"></a><h2>PERMISSIONS</h2><p>Non-root users can be allowed to use a configuration by setting
    ALLOW_USERS or ALLOW_GROUPS in the config file. For all operations to work the
    user must also be able to read and access the <code class="filename">.snapshots</code>
    directory inside the subvolume. The <code class="filename">.snapshots</code> directory
    must be owned by root and must not be writable by anybody else.</p></div><div class="refsect1"><a name="files"></a><h2>FILES</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="filename">/etc/sysconfig/snapper</code></span></dt><dd><p>Global configuration file.</p></dd><dt><span class="term"><code class="filename">/etc/snapper/configs</code></span></dt><dd><p>Directory containing configuration files.</p></dd><dt><span class="term"><code class="filename">/etc/snapper/config-templates</code></span></dt><dd><p>Directory containing configuration templates.</p></dd><dt><span class="term"><code class="filename">/etc/snapper/filters</code></span></dt><dd><p>Directory containing filter files.</p></dd><dt><span class="term"><code class="filename">/var/log/snapper.log</code></span></dt><dd><p>Logfile. Please include this file in bug reports.</p></dd></dl></div></div><div class="refsect1"><a name="notes"></a><h2>NOTES</h2><p>There is no mechanism to ensure consistency of the files while a
    snapshot it made. E.g. the files of a database can be inconsistence while
    the database is running.</p><p>Consistency after undochange is not guaranteed. E.g. when the
    creation of a user is undone there might still exist files from that
    user.</p><p>Support for extended attributes is a compile-time option.</p></div><div class="refsect1"><a name="homepage"></a><h2>HOMEPAGE</h2><p><a class="ulink" href="http://snapper.io/" target="_top">http://snapper.io/</a></p></div><div class="refsect1"><a name="authors"></a><h2>AUTHORS</h2><p>Arvin Schnell <code class="email">&lt;<a class="email" href="mailto:aschnell@suse.de">aschnell@suse.de</a>&gt;</code></p></div><div class="refsect1"><a name="see_also"></a><h2>SEE ALSO</h2><p>
      <span class="citerefentry"><span class="refentrytitle">btrfs</span>(8)</span>,
      <span class="citerefentry"><span class="refentrytitle">lvm</span>(8)</span>,
      <span class="citerefentry"><span class="refentrytitle">attr</span>(5)</span>
    </p></div></div></body></html>
